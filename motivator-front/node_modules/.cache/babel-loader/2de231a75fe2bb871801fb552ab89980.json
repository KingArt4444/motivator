{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\4 \\u043A\\u0443\\u0440\\u0441\\\\kurswatch7-front\\\\src\\\\component\\\\PenaltyPopFormComponent.jsx\";\nimport React, { Component } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport PenaltyDataService from '../service/PenaltyDataService';\n\nconst PopPop = require('react-poppop');\n\nexport default class PenaltyPopFormComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleShow = show => {\n      this.setState({\n        show\n      });\n    };\n\n    this.state = {\n      id: this.props.id,\n      type: '',\n      reason: '',\n      date: '',\n      duration: '',\n      user: {\n        id: this.props.userId\n      },\n      show: false\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.handleTypeDropdownChange = this.handleTypeDropdownChange.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n    console.log(this.state.user.id); // eslint-disable-next-line\n\n    if (this.state.id == -1) {\n      return;\n    }\n\n    PenaltyDataService.retrievePenalty(this.state.id).then(response => {\n      this.setState({\n        type: response.data.type,\n        reason: response.data.reason,\n        date: response.data.date,\n        duration: response.data.duration,\n        user: {\n          id: response.data.user.id\n        }\n      });\n      let selectTypeElement = document.getElementById(\"type-select\");\n      selectTypeElement.value = response.data.type;\n    });\n  }\n\n  onSubmit(values) {\n    let penalty = {\n      id: this.state.id,\n      type: values.type,\n      reason: values.reason,\n      date: values.date,\n      duration: values.duration,\n      user: {\n        id: this.state.user.id\n      }\n    };\n\n    if (values.id == -1) {\n      PenaltyDataService.createPenalty(penalty).then(() => {\n        this.toggleShow(false);\n        document.location.href = \"/userdetails/\".concat(this.state.user.id); // this.props.history.push(`/userdetails/${this.state.user.id}`)\n      });\n    } else {\n      PenaltyDataService.updatePenalty(this.state.id, penalty).then(() => document.location.href = \"/userdetails/\".concat(this.state.user.id));\n      /*this.props.history.push(`/allowances`))*/\n    }\n\n    console.log(values);\n  }\n\n  validate(values) {\n    let errors = {};\n\n    if (values.type.length < 3) {\n      errors.type = 'Имя должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.salary) {\n      errors.salary = 'Введите фамилию';\n    }\n\n    if (!values.premiya) {\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.sum) {\n      errors.sum = 'Введите возраст';\n    }\n\n    if (!values.month) {\n      errors.month = 'Введите месяц';\n    }\n\n    console.log(values.user);\n\n    if (values.user.id === \"\") {\n      errors.user = 'Выберите сотрудника перед сохранением';\n    }\n\n    return errors;\n  }\n\n  handleTypeDropdownChange(e) {\n    this.setState({\n      type: e.target.value\n    });\n  }\n\n  render() {\n    const show = this.state.show;\n    let _this$state = this.state,\n        id = _this$state.id,\n        type = _this$state.type,\n        reason = _this$state.reason,\n        date = _this$state.date,\n        duration = _this$state.duration,\n        user = _this$state.user;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: () => this.toggleShow(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"), React.createElement(PopPop, {\n      position: \"centerCenter\",\n      open: show,\n      closeBtn: true,\n      closeOnEsc: true,\n      onClose: () => this.toggleShow(false),\n      closeOnOverlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\u0414\\u0438\\u0441\\u0446\\u0438\\u043F\\u043B\\u0438\\u043D\\u0430\\u0440\\u043D\\u044B\\u0435 \\u0432\\u0437\\u044B\\u0441\\u043A\\u0430\\u043D\\u0438\\u044F\"), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Formik, {\n      initialValues: {\n        id,\n        type,\n        reason,\n        date,\n        duration,\n        user\n      },\n      onSubmit: this.onSubmit,\n      validateOnChange: false,\n      validateOnBlur: false,\n      validate: this.validate,\n      enableReinitialize: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, props => React.createElement(Form, {\n      id: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Id\"), React.createElement(Field, {\n      className: \"form-control\",\n      type: \"text\",\n      name: \"id\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    })), React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"\\u0422\\u0438\\u043F \\u0434\\u0438\\u0441\\u0446\\u0438\\u043F\\u043B\\u0438\\u043D\\u0430\\u0440\\u043D\\u043E\\u0433\\u043E \\u0432\\u0437\\u044B\\u0441\\u043A\\u0430\\u043D\\u0438\\u044F\"), React.createElement(\"select\", {\n      id: \"type-select\",\n      className: \"form-control\",\n      name: \"type\",\n      onChange: this.handleTypeDropdownChange,\n      value: this.props.type,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      label: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F \\u0434\\u0438\\u0441\\u0446\\u0438\\u043F\\u043B\\u0438\\u043D\\u0430\\u0440\\u043D\\u043E\\u0433\\u043E \\u0432\\u0437\\u044B\\u0441\\u043A\\u0430\\u043D\\u0438\\u044F\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"\\u0427\\u0430\\u0441\\u0442\\u0438\\u0447\\u043D\\u043E\",\n      label: \"\\u0427\\u0430\\u0441\\u0442\\u0438\\u0447\\u043D\\u043E\\u0435 \\u043B\\u0438\\u0448\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0440\\u0435\\u043C\\u0438\\u0438\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0441\\u0442\\u044C\\u044E\",\n      label: \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u043B\\u0438\\u0448\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0440\\u0435\\u043C\\u0438\\u0438\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }))), React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430 \\u0432\\u044B\\u043D\\u0435\\u0441\\u0435\\u043D\\u0438\\u044F \\u0432\\u0437\\u044B\\u0441\\u043A\\u0430\\u043D\\u0438\\u044F\"), React.createElement(Field, {\n      className: \"form-control\",\n      type: \"text\",\n      name: \"reason\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })), React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430\"), React.createElement(Field, {\n      className: \"form-control\",\n      type: \"date\",\n      name: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    })), React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"\\u0414\\u043B\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C(\\u043C\\u0435\\u0441\\u044F\\u0446\\u0435\\u0432)\"), React.createElement(Field, {\n      className: \"form-control\",\n      type: \"number\",\n      max: \"12\",\n      min: \"1\",\n      name: \"duration\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\")))))));\n  }\n\n}","map":{"version":3,"sources":["E:/Учёба/4 курс/kurswatch7-front/src/component/PenaltyPopFormComponent.jsx"],"names":["React","Component","Formik","Form","Field","ErrorMessage","PenaltyDataService","PopPop","require","PenaltyPopFormComponent","constructor","props","toggleShow","show","setState","state","id","type","reason","date","duration","user","userId","onSubmit","bind","validate","handleTypeDropdownChange","componentDidMount","console","log","retrievePenalty","then","response","data","selectTypeElement","document","getElementById","value","values","penalty","createPenalty","location","href","updatePenalty","errors","length","salary","premiya","sum","month","e","target","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport PenaltyDataService from '../service/PenaltyDataService';\r\nconst PopPop = require('react-poppop');\r\n\r\n\r\nexport default class PenaltyPopFormComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            id: this.props.id,\r\n            type: '',\r\n            reason: '',\r\n            date: '',\r\n            duration: '',\r\n            user: {\r\n                id: this.props.userId\r\n            },\r\n            show: false\r\n        }\r\n\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.validate = this.validate.bind(this)\r\n        this.handleTypeDropdownChange = this.handleTypeDropdownChange.bind(this)\r\n    }\r\n    componentDidMount() {\r\n\r\n        console.log(this.state.id)\r\n        console.log(this.state.user.id)\r\n\r\n        // eslint-disable-next-line\r\n        if (this.state.id == -1) {\r\n            return\r\n        }\r\n\r\n        PenaltyDataService.retrievePenalty(this.state.id)\r\n            .then(response => {\r\n                this.setState({\r\n                    type: response.data.type,\r\n                    reason: response.data.reason,\r\n                    date: response.data.date,\r\n                    duration: response.data.duration,\r\n                    user: {\r\n                        id: response.data.user.id\r\n                    }\r\n                })\r\n                let selectTypeElement = document.getElementById(\"type-select\");\r\n                selectTypeElement.value = response.data.type;\r\n            })\r\n\r\n    }\r\n\r\n    onSubmit(values) {\r\n        let penalty = {\r\n            id: this.state.id,\r\n            type: values.type,\r\n            reason: values.reason,\r\n            date: values.date,\r\n            duration: values.duration,\r\n            user: {\r\n                id: this.state.user.id\r\n            }\r\n        }\r\n\r\n\r\n        if (values.id == -1) {\r\n            PenaltyDataService.createPenalty(penalty)\r\n                .then(() => {\r\n                    this.toggleShow(false);\r\n                    document.location.href = `/userdetails/${this.state.user.id}`;\r\n                    // this.props.history.push(`/userdetails/${this.state.user.id}`)\r\n                })\r\n        } else {\r\n            PenaltyDataService.updatePenalty(this.state.id, penalty)\r\n                .then(() => document.location.href = `/userdetails/${this.state.user.id}`) /*this.props.history.push(`/allowances`))*/\r\n        }\r\n\r\n        console.log(values);\r\n    }\r\n\r\n    validate(values) {\r\n        let errors = {}\r\n        if (values.type.length < 3) {\r\n          errors.type = 'Имя должно состоять минимум из 2-х букв'\r\n        }\r\n        if (!values.salary) {\r\n          errors.salary = 'Введите фамилию'\r\n        }\r\n        if (!values.premiya) {\r\n          errors.premiya = 'Фамилия должно состоять минимум из 2-х букв'\r\n        }\r\n        if (!values.sum) {\r\n          errors.sum = 'Введите возраст'\r\n        }\r\n        if (!values.month) {\r\n          errors.month = 'Введите месяц'\r\n        }\r\n        console.log(values.user)\r\n        if (values.user.id === \"\") {\r\n          errors.user = 'Выберите сотрудника перед сохранением'\r\n        }\r\n\r\n        return errors\r\n    }\r\n\r\n    handleTypeDropdownChange(e) {\r\n        this.setState({ type: e.target.value });\r\n    }\r\n\r\n    toggleShow = show => {\r\n        this.setState({ show });\r\n    }\r\n\r\n    render() {\r\n        const { show } = this.state;\r\n        let { id, type, reason, date, duration, user } = this.state\r\n\r\n        return (\r\n            <div>\r\n                <button className=\"btn btn-success\" onClick={() => this.toggleShow(true)}>Добавить</button>\r\n                <PopPop position=\"centerCenter\"\r\n                    open={show}\r\n                    closeBtn={true}\r\n                    closeOnEsc={true}\r\n                    onClose={() => this.toggleShow(false)}\r\n                    closeOnOverlay={true}>\r\n                    <div>\r\n                        <h3>Дисциплинарные взыскания</h3>\r\n                        <div className=\"container\">\r\n                            <Formik\r\n                                initialValues={{ id, type, reason, date, duration, user }}\r\n                                onSubmit={this.onSubmit}\r\n                                validateOnChange={false}\r\n                                validateOnBlur={false}\r\n                                validate={this.validate}\r\n                                enableReinitialize={true}\r\n                            >\r\n                                {\r\n                                    (props) => (\r\n                                        <Form id=\"form\"\r\n                                        >\r\n                                            <fieldset className=\"form-group\">\r\n                                                <label>Id</label>\r\n                                                <Field className=\"form-control\" type=\"text\" name=\"id\" disabled />\r\n                                            </fieldset>\r\n                                            <fieldset className=\"form-group\">\r\n                                                <label>Тип дисциплинарного взыскания</label>\r\n                                                <select\r\n                                                    id=\"type-select\"\r\n                                                    className=\"form-control\"\r\n                                                    name=\"type\"\r\n                                                    onChange={this.handleTypeDropdownChange}\r\n                                                    value={this.props.type}\r\n                                                >\r\n                                                    <option value='0' label=\"Выберите тип дисциплинарного взыскания\" />\r\n                                                    <option value='Частично' label=\"Частичное лишение премии\" />\r\n                                                    <option value='Полностью' label=\"Полное лишение премии\" />\r\n                                                </select>\r\n                                            </fieldset>\r\n                                            <fieldset className=\"form-group\">\r\n                                                <label>Причина вынесения взыскания</label>\r\n                                                <Field className=\"form-control\" type=\"text\" name=\"reason\" />\r\n                                            </fieldset>\r\n                                            <fieldset className=\"form-group\">\r\n                                                <label>Дата</label>\r\n                                                <Field className=\"form-control\" type=\"date\" name=\"date\" />\r\n                                            </fieldset>\r\n                                            <fieldset className=\"form-group\">\r\n                                                <label>Длительность(месяцев)</label>\r\n                                                <Field className=\"form-control\" type=\"number\" max=\"12\" min=\"1\" name=\"duration\" />\r\n                                            </fieldset>\r\n                                            <button className=\"btn btn-success\" type=\"submit\">Сохранить</button>\r\n                                        </Form>\r\n                                    )\r\n                                }\r\n                            </Formik>\r\n\r\n                        </div>\r\n                    </div>\r\n                </PopPop>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}