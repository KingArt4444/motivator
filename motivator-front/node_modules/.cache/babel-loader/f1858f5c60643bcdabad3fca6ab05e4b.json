{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\4 \\u043A\\u0443\\u0440\\u0441\\\\kurswatch7-front\\\\src\\\\component\\\\AllowancePopFormComponent.jsx\";\nimport React, { Component } from 'react'; // import PopPop from './node_modules/react-poppop/lib/index';\n\nimport AllowancesDataService from '../service/AllowancesDataService';\n\nconst PopPop = require('react-poppop');\n\nexport default class AllowancePopFormComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleShow = show => {\n      this.setState({\n        show\n      });\n    };\n\n    this.state = {\n      id: this.props.id,\n      type: '',\n      date: '',\n      rate: '',\n      sum: '',\n      distribution: '',\n      period: '',\n      user: {\n        id: this.props.userId\n      },\n      show: false\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.handleStatusDropdownChange = this.handleStatusDropdownChange.bind(this);\n    this.handleEducationDropdownChange = this.handleEducationDropdownChange.bind(this);\n    this.handleEducationPlaceDropdownChange = this.handleEducationPlaceDropdownChange.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n    this.getUsers(); // eslint-disable-next-line\n\n    if (this.state.id == -1) {\n      return;\n    }\n\n    AllowancesDataService.retrieveAllowance(this.state.id).then(response => this.setState({\n      type: response.data.type,\n      date: response.data.date,\n      rate: response.data.rate,\n      sum: response.data.sum,\n      distribution: response.data.distribution,\n      period: response.data.period,\n      user: {\n        id: response.data.user.id\n      }\n    }));\n  }\n\n  onSubmit(values) {\n    let allowance = {\n      id: this.state.id,\n      type: values.type,\n      date: values.date,\n      rate: values.rate,\n      sum: values.sum,\n      distribution: values.distribution,\n      period: values.period,\n      user: {\n        id: values.user\n      }\n    };\n\n    if (values.id == -1) {\n      AllowancesDataService.createAllowance(allowance).then(() => this.props.history.push('/allowances'));\n    } else {\n      AllowancesDataService.updateAllowance(this.state.id, allowance).then(() => this.props.history.push('/allowances'));\n    }\n\n    console.log(values);\n  }\n\n  validate(values) {\n    let errors = {};\n\n    if (values.type.length < 3) {\n      errors.type = 'Имя должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.salary) {\n      errors.salary = 'Введите фамилию';\n    }\n\n    if (!values.premiya) {\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.sum) {\n      errors.sum = 'Введите возраст';\n    }\n\n    if (!values.month) {\n      errors.month = 'Введите месяц';\n    }\n\n    console.log(values.user);\n\n    if (values.user.id === \"\") {\n      errors.user = 'Выберите сотрудника перед сохранением';\n    }\n\n    return errors;\n  }\n\n  handleDropdownChange(e) {\n    this.setState({\n      user: e.target.value\n    });\n  }\n\n  render() {\n    const show = this.state.show;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      onClick: () => this.toggleShow(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Show Modal\"), React.createElement(PopPop, {\n      position: \"centerCenter\",\n      open: show,\n      closeBtn: true,\n      closeOnEsc: true,\n      onClose: () => this.toggleShow(false),\n      closeOnOverlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"title\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"content\")));\n  }\n\n}","map":{"version":3,"sources":["E:/Учёба/4 курс/kurswatch7-front/src/component/AllowancePopFormComponent.jsx"],"names":["React","Component","AllowancesDataService","PopPop","require","AllowancePopFormComponent","constructor","props","toggleShow","show","setState","state","id","type","date","rate","sum","distribution","period","user","userId","onSubmit","bind","validate","handleStatusDropdownChange","handleEducationDropdownChange","handleEducationPlaceDropdownChange","componentDidMount","console","log","getUsers","retrieveAllowance","then","response","data","values","allowance","createAllowance","history","push","updateAllowance","errors","length","salary","premiya","month","handleDropdownChange","e","target","value","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n// import PopPop from './node_modules/react-poppop/lib/index';\r\nimport AllowancesDataService from '../service/AllowancesDataService';\r\nconst PopPop = require('react-poppop');\r\n\r\n\r\nexport default class AllowancePopFormComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.id,\r\n      type: '',\r\n      date: '',\r\n      rate: '',\r\n      sum: '',\r\n      distribution: '',\r\n      period: '',\r\n      user: {\r\n        id: this.props.userId\r\n      },\r\n      show: false\r\n    }\r\n\r\n    this.onSubmit = this.onSubmit.bind(this)\r\n    this.validate = this.validate.bind(this)\r\n    this.handleStatusDropdownChange = this.handleStatusDropdownChange.bind(this)\r\n    this.handleEducationDropdownChange = this.handleEducationDropdownChange.bind(this)\r\n    this.handleEducationPlaceDropdownChange = this.handleEducationPlaceDropdownChange.bind(this)\r\n  }\r\n  componentDidMount() {\r\n\r\n    console.log(this.state.id)\r\n\r\n    this.getUsers();\r\n\r\n    // eslint-disable-next-line\r\n    if (this.state.id == -1) {\r\n      return\r\n    }\r\n\r\n    AllowancesDataService.retrieveAllowance(this.state.id)\r\n      .then(response => this.setState({\r\n        type: response.data.type,\r\n        date: response.data.date,\r\n        rate: response.data.rate,\r\n        sum: response.data.sum,\r\n        distribution: response.data.distribution,\r\n        period: response.data.period,\r\n        user: {\r\n          id: response.data.user.id\r\n        }\r\n      }))\r\n\r\n  }\r\n\r\n  onSubmit(values) {\r\n    let allowance = {\r\n      id: this.state.id,\r\n      type: values.type,\r\n      date: values.date,\r\n      rate: values.rate,\r\n      sum: values.sum,\r\n      distribution: values.distribution,\r\n      period: values.period,\r\n      user: {\r\n        id: values.user\r\n      }\r\n    }\r\n\r\n\r\n    if (values.id == -1) {\r\n      AllowancesDataService.createAllowance(allowance)\r\n        .then(() => this.props.history.push('/allowances'))\r\n    } else {\r\n      AllowancesDataService.updateAllowance(this.state.id, allowance)\r\n        .then(() => this.props.history.push('/allowances'))\r\n    }\r\n\r\n    console.log(values);\r\n  }\r\n\r\n  validate(values) {\r\n    let errors = {}\r\n    if (values.type.length < 3) {\r\n      errors.type = 'Имя должно состоять минимум из 2-х букв'\r\n    }\r\n    if (!values.salary) {\r\n      errors.salary = 'Введите фамилию'\r\n    }\r\n    if (!values.premiya) {\r\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв'\r\n    }\r\n    if (!values.sum) {\r\n      errors.sum = 'Введите возраст'\r\n    }\r\n    if (!values.month) {\r\n      errors.month = 'Введите месяц'\r\n    }\r\n    console.log(values.user)\r\n    if (values.user.id === \"\") {\r\n      errors.user = 'Выберите сотрудника перед сохранением'\r\n    }\r\n\r\n    return errors\r\n  }\r\n\r\n  handleDropdownChange(e) {\r\n    this.setState({ user: e.target.value });\r\n  }\r\n\r\n  toggleShow = show => {\r\n    this.setState({ show });\r\n  }\r\n\r\n  render() {\r\n    const { show } = this.state;\r\n    return (\r\n      <div>\r\n        <button className=\"btn btn-default\" onClick={() => this.toggleShow(true)}>Show Modal</button>\r\n        <PopPop position=\"centerCenter\"\r\n          open={show}\r\n          closeBtn={true}\r\n          closeOnEsc={true}\r\n          onClose={() => this.toggleShow(false)}\r\n          closeOnOverlay={true}>\r\n          <h1>title</h1>\r\n          <p>\r\n            content\r\n          </p>\r\n        </PopPop>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}