{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\4 \\u043A\\u0443\\u0440\\u0441\\\\kurswatch7-front\\\\src\\\\component\\\\AllowancePopFormComponent.jsx\";\nimport React, { Component } from 'react'; // import PopPop from './node_modules/react-poppop/lib/index';\n\nconst PopPop = require('react-poppop');\n\nexport default class AllowancePopFormComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleShow = show => {\n      this.setState({\n        show\n      });\n    };\n\n    this.state = {\n      id: this.props.match.params.id,\n      workdays: '',\n      totalWorkdays: '',\n      assessment: '',\n      month: '',\n      year: '',\n      user: {\n        id: ''\n      },\n      show: false\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.handleStatusDropdownChange = this.handleStatusDropdownChange.bind(this);\n    this.handleEducationDropdownChange = this.handleEducationDropdownChange.bind(this);\n    this.handleEducationPlaceDropdownChange = this.handleEducationPlaceDropdownChange.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n    this.getUsers(); // eslint-disable-next-line\n\n    if (this.state.id == -1) {\n      return;\n    }\n\n    SalaryDataService.retrieveSalary(this.state.id).then(response => this.setState({\n      type: response.data.type,\n      salary: response.data.salary,\n      premiya: response.data.premiya,\n      sum: response.data.sum,\n      month: response.data.month,\n      user: {\n        id: response.data.user.id\n      }\n    }));\n  }\n\n  onSubmit(values) {\n    let salary = {\n      id: this.state.id,\n      type: values.type,\n      salary: values.salary,\n      premiya: values.premiya,\n      sum: values.sum,\n      month: values.month,\n      user: {\n        id: values.user\n      }\n    };\n\n    if (values.id == -1) {\n      SalaryDataService.createSalary(salary).then(() => this.props.history.push('/salaries'));\n    } else {\n      SalaryDataService.updateSalary(this.state.id, salary).then(() => this.props.history.push('/salaries'));\n    }\n\n    console.log(values);\n  }\n\n  validate(values) {\n    let errors = {};\n\n    if (values.type.length < 3) {\n      errors.type = 'Имя должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.salary) {\n      errors.salary = 'Введите фамилию';\n    }\n\n    if (!values.premiya) {\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.sum) {\n      errors.sum = 'Введите возраст';\n    }\n\n    if (!values.month) {\n      errors.month = 'Введите месяц';\n    }\n\n    console.log(values.user);\n\n    if (values.user.id === \"\") {\n      errors.user = 'Выберите сотрудника перед сохранением';\n    }\n\n    return errors;\n  }\n\n  getUsers() {\n    UserDataService.retrieveAllUsers().then(response => {\n      console.log(response.data);\n      this.setState({\n        users: response.data\n      });\n    });\n  }\n\n  getUser(id) {\n    UserDataService.retrieveUser(id).then(response => {\n      return response.data;\n    });\n  }\n\n  handleDropdownChange(e) {\n    this.setState({\n      user: e.target.value\n    });\n  }\n\n  render() {\n    const show = this.state.show;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      onClick: () => this.toggleShow(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Show Modal\"), React.createElement(PopPop, {\n      position: \"centerCenter\",\n      open: show,\n      closeBtn: true,\n      closeOnEsc: true,\n      onClose: () => this.toggleShow(false),\n      closeOnOverlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"title\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"content\")));\n  }\n\n}","map":{"version":3,"sources":["E:/Учёба/4 курс/kurswatch7-front/src/component/AllowancePopFormComponent.jsx"],"names":["React","Component","PopPop","require","AllowancePopFormComponent","constructor","props","toggleShow","show","setState","state","id","match","params","workdays","totalWorkdays","assessment","month","year","user","onSubmit","bind","validate","handleStatusDropdownChange","handleEducationDropdownChange","handleEducationPlaceDropdownChange","componentDidMount","console","log","getUsers","SalaryDataService","retrieveSalary","then","response","type","data","salary","premiya","sum","values","createSalary","history","push","updateSalary","errors","length","UserDataService","retrieveAllUsers","users","getUser","retrieveUser","handleDropdownChange","e","target","value","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n// import PopPop from './node_modules/react-poppop/lib/index';\r\nconst PopPop = require('react-poppop');\r\n\r\nexport default class AllowancePopFormComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.match.params.id,\r\n      workdays: '',\r\n      totalWorkdays: '',\r\n      assessment: '',\r\n      month: '',\r\n      year: '',\r\n      user: {\r\n        id: ''\r\n      },\r\n      show: false\r\n    }\r\n\r\n    this.onSubmit = this.onSubmit.bind(this)\r\n    this.validate = this.validate.bind(this)\r\n    this.handleStatusDropdownChange = this.handleStatusDropdownChange.bind(this)\r\n    this.handleEducationDropdownChange = this.handleEducationDropdownChange.bind(this)\r\n    this.handleEducationPlaceDropdownChange = this.handleEducationPlaceDropdownChange.bind(this)\r\n  }\r\n  componentDidMount() {\r\n\r\n    console.log(this.state.id)\r\n\r\n    this.getUsers();\r\n\r\n    // eslint-disable-next-line\r\n    if (this.state.id == -1) {\r\n      return\r\n    }\r\n\r\n    SalaryDataService.retrieveSalary(this.state.id)\r\n      .then(response => this.setState({\r\n        type: response.data.type,\r\n        salary: response.data.salary,\r\n        premiya: response.data.premiya,\r\n        sum: response.data.sum,\r\n        month: response.data.month,\r\n        user: {\r\n          id: response.data.user.id\r\n        }\r\n      }))\r\n\r\n  }\r\n\r\n  onSubmit(values) {\r\n    let salary = {\r\n      id: this.state.id,\r\n      type: values.type,\r\n      salary: values.salary,\r\n      premiya: values.premiya,\r\n      sum: values.sum,\r\n      month: values.month,\r\n      user: {\r\n        id: values.user\r\n      }\r\n    }\r\n\r\n\r\n    if (values.id == -1) {\r\n      SalaryDataService.createSalary(salary)\r\n        .then(() => this.props.history.push('/salaries'))\r\n    } else {\r\n      SalaryDataService.updateSalary(this.state.id, salary)\r\n        .then(() => this.props.history.push('/salaries'))\r\n    }\r\n\r\n    console.log(values);\r\n  }\r\n\r\n  validate(values) {\r\n    let errors = {}\r\n    if (values.type.length < 3) {\r\n      errors.type = 'Имя должно состоять минимум из 2-х букв'\r\n    }\r\n    if (!values.salary) {\r\n      errors.salary = 'Введите фамилию'\r\n    }\r\n    if (!values.premiya) {\r\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв'\r\n    }\r\n    if (!values.sum) {\r\n      errors.sum = 'Введите возраст'\r\n    }\r\n    if (!values.month) {\r\n      errors.month = 'Введите месяц'\r\n    }\r\n    console.log(values.user)\r\n    if (values.user.id === \"\") {\r\n      errors.user = 'Выберите сотрудника перед сохранением'\r\n    }\r\n\r\n    return errors\r\n  }\r\n\r\n  getUsers() {\r\n    UserDataService.retrieveAllUsers()\r\n      .then(\r\n        response => {\r\n          console.log(response.data);\r\n          this.setState({ users: response.data })\r\n        })\r\n  }\r\n\r\n  getUser(id) {\r\n    UserDataService.retrieveUser(id)\r\n      .then(response => {\r\n        return response.data;\r\n      })\r\n  }\r\n\r\n  handleDropdownChange(e) {\r\n    this.setState({ user: e.target.value });\r\n  }\r\n\r\n  toggleShow = show => {\r\n    this.setState({ show });\r\n  }\r\n\r\n  render() {\r\n    const { show } = this.state;\r\n    return (\r\n      <div>\r\n        <button className=\"btn btn-default\" onClick={() => this.toggleShow(true)}>Show Modal</button>\r\n        <PopPop position=\"centerCenter\"\r\n          open={show}\r\n          closeBtn={true}\r\n          closeOnEsc={true}\r\n          onClose={() => this.toggleShow(false)}\r\n          closeOnOverlay={true}>\r\n          <h1>title</h1>\r\n          <p>\r\n            content\r\n          </p>\r\n        </PopPop>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}