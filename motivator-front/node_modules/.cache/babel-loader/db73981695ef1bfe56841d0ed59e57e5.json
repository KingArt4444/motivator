{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\4 \\u043A\\u0443\\u0440\\u0441\\\\kurswatch7-front\\\\src\\\\component\\\\AllowancesTableComponent.jsx\";\nimport React, { Component } from 'react';\nimport AllowancesDataService from '../service/AllowancesDataService';\nimport AllowancePopFormComponent from './AllowancePopFormComponent';\n\nclass AllowancesTableComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allowances: [],\n      userId: this.props.userId,\n      message: null\n    };\n    this.refreshAllowances = this.refreshAllowances.bind(this);\n    this.deleteAllowanceClicked = this.deleteAllowanceClicked.bind(this);\n    this.updateAllowanceClicked = this.updateAllowanceClicked.bind(this);\n    this.addAllowanceClicked = this.addAllowanceClicked.bind(this);\n    this.chooseAllowance = this.chooseAllowance.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshAllowances();\n    console.log(this.state.userId);\n  }\n\n  refreshAllowances() {\n    AllowancesDataService.retrieveAllAllowances().then(response => {\n      console.log(response);\n      this.setState({\n        allowances: response.data\n      });\n    });\n  }\n\n  deleteAllowanceClicked(id) {\n    var result = window.confirm(\"Вы действительно хотите удалить данную информацию?\");\n    AllowancesDataService.deleteAllowance(id).then(response => {\n      this.setState({\n        message: \"Delete of info \".concat(id, \" Successful\")\n      });\n      this.refreshAllowances();\n    });\n  }\n\n  chooseAllowance(userId) {\n    return this.state.allowances.map(allowance => {\n      if (allowance.user.id == userId) {\n        document.getElementById(\"dataRow\").remove();\n        return React.createElement(\"tr\", {\n          key: allowance.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, allowance.type), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, allowance.date), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, allowance.rate), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, allowance.sum), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, allowance.period), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-warning\",\n          onClick: () => this.deleteAllowanceClicked(allowance.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-success\",\n          onClick: () => this.updateAllowanceClicked(allowance.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\")));\n      }\n    });\n  }\n\n  updateAllowanceClicked(id) {\n    console.log('update ' + id);\n    this.props.history.push(\"/allowances/\".concat(id));\n  }\n\n  addAllowanceClicked() {\n    this.props.history.push(\"/allowances/-1\");\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"\\u0422\\u0438\\u043F\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u043E\\u0446\\u0435\\u043D\\u0442\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\u0421\\u0443\\u043C\\u043C\\u0430\\u0440\\u043D\\u043E (\\u0441 \\u043E\\u043A\\u043B\\u0430\\u0434\\u043E\\u043C)\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"\\u0414\\u043B\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\")), React.createElement(\"tr\", {\n      id: \"dataRow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \" \\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.chooseAllowance(this.state.userId) // this.state.allowances.map(\n    //     allowance => {\n    //         if (allowance.user.id == this.state.userId) {\n    //             <tr key={allowance.id}>\n    //                 <td>{allowance.type}</td>\n    //                 <td>{allowance.date}</td>\n    //                 <td>{allowance.rate}</td>\n    //                 <td>{allowance.sum}</td>\n    //                 <td>{allowance.period}</td>\n    //                 <td><button className=\"btn btn-warning\" onClick={() => this.deleteAllowanceClicked(allowance.id)}>Удалить</button></td>\n    //                 <td><button className=\"btn btn-success\" onClick={() => this.updateAllowanceClicked(allowance.id)}>Редактировать</button></td>\n    //             </tr>\n    //         \n    //     }\n    // )\n    )), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(AllowancePopFormComponent, {\n      userId: this.state.userId,\n      id: \"-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default AllowancesTableComponent;","map":{"version":3,"sources":["E:/Учёба/4 курс/kurswatch7-front/src/component/AllowancesTableComponent.jsx"],"names":["React","Component","AllowancesDataService","AllowancePopFormComponent","AllowancesTableComponent","constructor","props","state","allowances","userId","message","refreshAllowances","bind","deleteAllowanceClicked","updateAllowanceClicked","addAllowanceClicked","chooseAllowance","componentDidMount","console","log","retrieveAllAllowances","then","response","setState","data","id","result","window","confirm","deleteAllowance","map","allowance","user","document","getElementById","remove","type","date","rate","sum","period","history","push","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AllowancesDataService from '../service/AllowancesDataService';\r\nimport AllowancePopFormComponent from './AllowancePopFormComponent';\r\n\r\nclass AllowancesTableComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            allowances: [],\r\n            userId: this.props.userId,\r\n            message: null\r\n        }\r\n        this.refreshAllowances = this.refreshAllowances.bind(this)\r\n        this.deleteAllowanceClicked = this.deleteAllowanceClicked.bind(this)\r\n        this.updateAllowanceClicked = this.updateAllowanceClicked.bind(this)\r\n        this.addAllowanceClicked = this.addAllowanceClicked.bind(this)\r\n        this.chooseAllowance = this.chooseAllowance.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshAllowances();\r\n        console.log(this.state.userId);\r\n    }\r\n\r\n    refreshAllowances() {\r\n        AllowancesDataService.retrieveAllAllowances()\r\n            .then(\r\n                response => {\r\n                    console.log(response);\r\n                    this.setState({ allowances: response.data })\r\n                }\r\n            )\r\n    }\r\n\r\n    deleteAllowanceClicked(id) {\r\n        var result = window.confirm(\"Вы действительно хотите удалить данную информацию?\");\r\n        AllowancesDataService.deleteAllowance(id)\r\n            .then(\r\n                response => {\r\n                    this.setState({ message: `Delete of info ${id} Successful` })\r\n                    this.refreshAllowances()\r\n                }\r\n            )\r\n    }\r\n\r\n    chooseAllowance(userId) {\r\n        return this.state.allowances.map(\r\n            allowance => {\r\n                if (allowance.user.id == userId) {\r\n                    document.getElementById(\"dataRow\").remove();\r\n                    return (\r\n                        <tr key={allowance.id}>\r\n                            <td>{allowance.type}</td>\r\n                            <td>{allowance.date}</td>\r\n                            <td>{allowance.rate}</td>\r\n                            <td>{allowance.sum}</td>\r\n                            <td>{allowance.period}</td>\r\n                            <td><button className=\"btn btn-warning\" onClick={() => this.deleteAllowanceClicked(allowance.id)}>Удалить</button></td>\r\n                            <td><button className=\"btn btn-success\" onClick={() => this.updateAllowanceClicked(allowance.id)}>Редактировать</button></td>\r\n                        </tr>\r\n                    )\r\n\r\n                }\r\n            })\r\n    }\r\n\r\n    updateAllowanceClicked(id) {\r\n        console.log('update ' + id)\r\n        this.props.history.push(`/allowances/${id}`)\r\n    }\r\n\r\n    addAllowanceClicked() {\r\n        this.props.history.push(`/allowances/-1`)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <table className=\"table\">\r\n                    <thead className=\"thead-dark\">\r\n                        <tr>\r\n                            <th>Тип</th>\r\n                            <th>Дата</th>\r\n                            <th>Процент</th>\r\n                            <th>Суммарно (с окладом)</th>\r\n                            <th>Длительность</th>\r\n                            <th>Удалить</th>\r\n                            <th>Редактировать</th>\r\n                        </tr>\r\n                        <tr id=\"dataRow\">\r\n                            <span> Нет данных</span>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.chooseAllowance(this.state.userId)\r\n                            // this.state.allowances.map(\r\n                            //     allowance => {\r\n                            //         if (allowance.user.id == this.state.userId) {\r\n                            //             <tr key={allowance.id}>\r\n                            //                 <td>{allowance.type}</td>\r\n                            //                 <td>{allowance.date}</td>\r\n                            //                 <td>{allowance.rate}</td>\r\n                            //                 <td>{allowance.sum}</td>\r\n                            //                 <td>{allowance.period}</td>\r\n                            //                 <td><button className=\"btn btn-warning\" onClick={() => this.deleteAllowanceClicked(allowance.id)}>Удалить</button></td>\r\n                            //                 <td><button className=\"btn btn-success\" onClick={() => this.updateAllowanceClicked(allowance.id)}>Редактировать</button></td>\r\n                            //             </tr>\r\n                            //         \r\n                            //     }\r\n                            // )\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n                <div className=\"row\">\r\n                    {/* <button className=\"btn btn-success\" onClick={this.addAllowanceClicked}>Добавить</button> */}\r\n                    <AllowancePopFormComponent userId={this.state.userId} id='-1'/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AllowancesTableComponent"]},"metadata":{},"sourceType":"module"}