{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\4 \\u043A\\u0443\\u0440\\u0441\\\\kurswatch7-front\\\\src\\\\component\\\\AllowancePopFormComponent.jsx\";\nimport React, { Component } from 'react'; // import PopPop from './node_modules/react-poppop/lib/index';\n\nconst PopPop = require('react-poppop');\n\nimport AllowancesDataService from '../service/AllowancesDataService';\nexport default class AllowancePopFormComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleShow = show => {\n      this.setState({\n        show\n      });\n    };\n\n    this.state = {\n      id: this.props.id,\n      type: '',\n      date: '',\n      rate: '',\n      sum: '',\n      distribution: '',\n      period: '',\n      user: {\n        id: this.props.userId\n      },\n      show: false\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.handleStatusDropdownChange = this.handleStatusDropdownChange.bind(this);\n    this.handleEducationDropdownChange = this.handleEducationDropdownChange.bind(this);\n    this.handleEducationPlaceDropdownChange = this.handleEducationPlaceDropdownChange.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n    this.getUsers(); // eslint-disable-next-line\n\n    if (this.state.id == -1) {\n      return;\n    }\n\n    AllowancesDataService.retrieveAllowance(this.state.id).then(response => this.setState({\n      type: response.data.type,\n      salary: response.data.salary,\n      premiya: response.data.premiya,\n      sum: response.data.sum,\n      month: response.data.month,\n      user: {\n        id: response.data.user.id\n      }\n    }));\n  }\n\n  onSubmit(values) {\n    let salary = {\n      id: this.state.id,\n      type: values.type,\n      salary: values.salary,\n      premiya: values.premiya,\n      sum: values.sum,\n      month: values.month,\n      user: {\n        id: values.user\n      }\n    };\n\n    if (values.id == -1) {\n      SalaryDataService.createSalary(salary).then(() => this.props.history.push('/salaries'));\n    } else {\n      SalaryDataService.updateSalary(this.state.id, salary).then(() => this.props.history.push('/salaries'));\n    }\n\n    console.log(values);\n  }\n\n  validate(values) {\n    let errors = {};\n\n    if (values.type.length < 3) {\n      errors.type = 'Имя должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.salary) {\n      errors.salary = 'Введите фамилию';\n    }\n\n    if (!values.premiya) {\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв';\n    }\n\n    if (!values.sum) {\n      errors.sum = 'Введите возраст';\n    }\n\n    if (!values.month) {\n      errors.month = 'Введите месяц';\n    }\n\n    console.log(values.user);\n\n    if (values.user.id === \"\") {\n      errors.user = 'Выберите сотрудника перед сохранением';\n    }\n\n    return errors;\n  }\n\n  handleDropdownChange(e) {\n    this.setState({\n      user: e.target.value\n    });\n  }\n\n  render() {\n    const show = this.state.show;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      onClick: () => this.toggleShow(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Show Modal\"), React.createElement(PopPop, {\n      position: \"centerCenter\",\n      open: show,\n      closeBtn: true,\n      closeOnEsc: true,\n      onClose: () => this.toggleShow(false),\n      closeOnOverlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"title\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"content\")));\n  }\n\n}","map":{"version":3,"sources":["E:/Учёба/4 курс/kurswatch7-front/src/component/AllowancePopFormComponent.jsx"],"names":["React","Component","PopPop","require","AllowancesDataService","AllowancePopFormComponent","constructor","props","toggleShow","show","setState","state","id","type","date","rate","sum","distribution","period","user","userId","onSubmit","bind","validate","handleStatusDropdownChange","handleEducationDropdownChange","handleEducationPlaceDropdownChange","componentDidMount","console","log","getUsers","retrieveAllowance","then","response","data","salary","premiya","month","values","SalaryDataService","createSalary","history","push","updateSalary","errors","length","handleDropdownChange","e","target","value","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n// import PopPop from './node_modules/react-poppop/lib/index';\r\nconst PopPop = require('react-poppop');\r\nimport AllowancesDataService from '../service/AllowancesDataService';\r\n\r\nexport default class AllowancePopFormComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.id,\r\n      type: '',\r\n      date: '',\r\n      rate: '',\r\n      sum: '',\r\n      distribution: '',\r\n      period: '',\r\n      user: {\r\n        id: this.props.userId\r\n      },\r\n      show: false\r\n    }\r\n\r\n    this.onSubmit = this.onSubmit.bind(this)\r\n    this.validate = this.validate.bind(this)\r\n    this.handleStatusDropdownChange = this.handleStatusDropdownChange.bind(this)\r\n    this.handleEducationDropdownChange = this.handleEducationDropdownChange.bind(this)\r\n    this.handleEducationPlaceDropdownChange = this.handleEducationPlaceDropdownChange.bind(this)\r\n  }\r\n  componentDidMount() {\r\n\r\n    console.log(this.state.id)\r\n\r\n    this.getUsers();\r\n\r\n    // eslint-disable-next-line\r\n    if (this.state.id == -1) {\r\n      return\r\n    }\r\n\r\n    AllowancesDataService.retrieveAllowance(this.state.id)\r\n      .then(response => this.setState({\r\n        type: response.data.type,\r\n        salary: response.data.salary,\r\n        premiya: response.data.premiya,\r\n        sum: response.data.sum,\r\n        month: response.data.month,\r\n        user: {\r\n          id: response.data.user.id\r\n        }\r\n      }))\r\n\r\n  }\r\n\r\n  onSubmit(values) {\r\n    let salary = {\r\n      id: this.state.id,\r\n      type: values.type,\r\n      salary: values.salary,\r\n      premiya: values.premiya,\r\n      sum: values.sum,\r\n      month: values.month,\r\n      user: {\r\n        id: values.user\r\n      }\r\n    }\r\n\r\n\r\n    if (values.id == -1) {\r\n      SalaryDataService.createSalary(salary)\r\n        .then(() => this.props.history.push('/salaries'))\r\n    } else {\r\n      SalaryDataService.updateSalary(this.state.id, salary)\r\n        .then(() => this.props.history.push('/salaries'))\r\n    }\r\n\r\n    console.log(values);\r\n  }\r\n\r\n  validate(values) {\r\n    let errors = {}\r\n    if (values.type.length < 3) {\r\n      errors.type = 'Имя должно состоять минимум из 2-х букв'\r\n    }\r\n    if (!values.salary) {\r\n      errors.salary = 'Введите фамилию'\r\n    }\r\n    if (!values.premiya) {\r\n      errors.premiya = 'Фамилия должно состоять минимум из 2-х букв'\r\n    }\r\n    if (!values.sum) {\r\n      errors.sum = 'Введите возраст'\r\n    }\r\n    if (!values.month) {\r\n      errors.month = 'Введите месяц'\r\n    }\r\n    console.log(values.user)\r\n    if (values.user.id === \"\") {\r\n      errors.user = 'Выберите сотрудника перед сохранением'\r\n    }\r\n\r\n    return errors\r\n  }\r\n\r\n  handleDropdownChange(e) {\r\n    this.setState({ user: e.target.value });\r\n  }\r\n\r\n  toggleShow = show => {\r\n    this.setState({ show });\r\n  }\r\n\r\n  render() {\r\n    const { show } = this.state;\r\n    return (\r\n      <div>\r\n        <button className=\"btn btn-default\" onClick={() => this.toggleShow(true)}>Show Modal</button>\r\n        <PopPop position=\"centerCenter\"\r\n          open={show}\r\n          closeBtn={true}\r\n          closeOnEsc={true}\r\n          onClose={() => this.toggleShow(false)}\r\n          closeOnOverlay={true}>\r\n          <h1>title</h1>\r\n          <p>\r\n            content\r\n          </p>\r\n        </PopPop>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}